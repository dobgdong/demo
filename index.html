<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<section id="wrap">
			<!--头部开始-->
			<!--流体布局-->
			<header id="head">
				<!--固定布局-->
				<div class="header_main">
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="木有意思" />
						</a>
					</h1>
					<nav class="nav">
						<ul class="list clearfix">
							<li>
								<a href="javascript:;">
									<div class="up"><img src="img/icon/index02.png" alt="" width="16" height="16"/></div>
									<div class="down"><img src="img/icon/index.png" alt="" width="16" height="16" /></div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Course</div>
									<div class="down">Course</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">About</div>
									<div class="down">About</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Works</div>
									<div class="down">Works</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Team</div>
									<div class="down">Team</div>
								</a>
							</li>
						</ul>
					</nav>
					<div class="arrow"></div>
				</div>
			</header>
			<!--头部结束-->
			
			<!--内容区开始-->
			<section id="content">
				<ul class="list">
					<li class="home">
						<section>
							<ul class="home1">
								<li class="commonTitle active">
									<div class="item">one layar</div>
								</li>
								<li class="commonTitle">
									<div class="item">two layar</div>
								</li>
								<li class="commonTitle">
									<div class="item">three layar</div>
								</li>
								<li class="commonTitle">
									<div class="item">four layar</div>
								</li>
							</ul>
							<ul class="home2">
								<li class="active"></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</section>
					</li>
					<li class="course">
						<section>
							<header class="course1 commonTitle">
								<span>EINIGE</span>  <br />
								<span>EINIGE</span>  <br />
								<span>EINIGE</span>  <br />
							</header>
							<div class="course2 commonText">
								<p>
									aajlkjakldgjasldjfaajlkjakldgjasldjfaajlkjakldgjasldjf
									<br />
									aajlkjakldgjasldjfaajlkjakldgjasldjfaajlkjakldgjasldjf
								</p>
							</div>
							<div class="course3">
								<div class="item">
									<div class="back_face"></div>
									<div class="face">变美</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">皮肤变好</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">变白</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">脾气变好</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">吃嘛嘛香</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">身体倍棒</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">天天好心情</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">唱歌好听</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">考研通过</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">痘痘变不见</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">连喝水都变胖</div>
								</div>
								<div class="item">
									<div class="back_face"></div>
									<div class="face">永远开心</div>
								</div>
							</div>
						</section>
					</li>
					<li class="about">
						<section>
							<header class="about1 commonTitle">
								<span>JLAKSGIOJ</span>  <br />
								<span>GADGAS</span>  <br />
								<span>ECDSGGH</span>  <br />
							</header>
							<div class="about2">
								<p class="commonText">
									this is a programae this is a programae this is a programae this is a programae this is a programae this is a programae 
								</p>
							</div>
							<div class="about3">
								<div class="item">
									<span></span>
									<ul data-src='img/bg1.jpg'></ul>
								</div>
								<div class="item">
									<span></span>
									<ul data-src='img/bg1.jpg'></ul>
								</div>
							</div>
						</section>
					</li>
					<li class="works">
						<section>
							<header class="works1 commonTitle">
								<span>DONGDONG</span>		<br />
								<span>XINXIN</span>			<br />
								<span>GOODDONGXIN</span> 	<br />
							</header>
							<div class="works2">
								<div class="item">
									<img src="img/works01.jpg" alt="" width="220" height="133"/>
									<!--鼠标滑动时候的遮罩层-->
									<div class="mask">
										<span>文字文字文字文字文字文字文字文字文字文字</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/works02.jpg" alt="" width="220" height="133"/>
									<!--鼠标滑动时候的遮罩层-->
									<div class="mask">
										<span>文字文字文字文字文字文字文字文字文字文字</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/works03.jpg" alt="" width="220" height="133"/>
									<!--鼠标滑动时候的遮罩层-->
									<div class="mask">
										<span>文字文字文字文字文字文字文字文字文字文字</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/works04.jpg" alt="" width="332" height="133"/>
									<!--鼠标滑动时候的遮罩层-->
									<div class="mask">
										<span>文字文字文字文字文字文字文字文字文字文字</span>
										<div class="icon"></div>
									</div>
								</div>
							</div>
							<div class="works3"></div>
						</section>
					</li>
					<li class="team">
						<section>
							<header class="team1 commonTitle">
								<span>TEAM</span> <br />
								<span>TEAMBIG</span> <br />
							</header>
							<div class="team2">
								<p class="commonText">this is a english text this is a english text this is a english text this is a english text</p>
								<p class="commonText">this is a english text this is a english text this is a english text this is a english text</p>
							</div>
							<ul class="team3">
								<li></li>
								<li></li>
								<li></li>
								<li></li>
								<li></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</section>
					</li>
				</ul>
				<ul class="dot">
					<li class="active"></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
			</section>
			<!--内容区结束-->
		</section>
	</body>
	
	<script>
		window.onload = function() {
			var arrowNode = document.querySelector('#head .header_main .arrow');
			var LiNode = document.querySelectorAll('#head .header_main .nav > .list li');
			var UpNode = document.querySelectorAll('#head .header_main .nav > .list li .up');
			var firstLiNode = LiNode[0];
			var firstUpNode = firstLiNode.querySelector('.up');
			var head = document.querySelector('#head');
			
			var content = document.querySelector('#content');
			var cLiNode =  document.querySelectorAll('#content .list > li');
			var cList = document.querySelector('#content .list');
			var dots = document.querySelectorAll('#content .dot > li');
			
			var home1 = document.querySelector('#content > .list .home .home1');
			var home2LiNodes = document.querySelectorAll('#content > .list .home .home2 > li');
			var home1LiNodes = document.querySelectorAll('#content > .list .home .home1 > li');
			
			var aboutUls = document.querySelectorAll('#content > .list .about .about3 > .item > ul');
//			同步当前屏的索引
			var now = 0;
			var timer = 0;
			window.onresize = function() {
				
//				调整分辨率
//				1.视口只能出现一屏
//				2.每一屏的偏移量需要重新调整 因为视口中只能出现一屏
				contentBind();
				cList.style.top = -now * (document.documentElement.clientHeight - head.offsetHeight) + 'px';
				arrowNode.style.left = LiNode[now].offsetLeft + LiNode[now].offsetWidth/2 - arrowNode.offsetWidth/2 + 'px';
				
			};
			
//			第一屏交互效果 
//				---> 轮播器
			var oldIndex = 0;
			var autoIndex = 0;
			var timerHome2 = 0;
			home2Bind();
			function home2Bind() {
				for(var i=0;i<home2LiNodes.length;i++) {
					home2LiNodes[i].index = i;
					home2LiNodes[i].onclick = function() {
						clearInterval(timerHome2);
						for(var i=0;i<home2LiNodes.length;i++) {
							removeClass(home2LiNodes[i],'active');
						}
						addClass(this,'active');
						
						
						
//						轮播效果
//						从左往右(rightShow) 新的索引大于旧的索引
						if(this.index > oldIndex) {
							removeClass(home1LiNodes[this.index], 'leftHide');
							removeClass(home1LiNodes[this.index], 'leftShow');
							removeClass(home1LiNodes[this.index], 'rightHide');
							addClass(home1LiNodes[this.index], 'rightShow');
							
							removeClass(home1LiNodes[oldIndex], 'leftShow');
							removeClass(home1LiNodes[oldIndex], 'rightShow');
							removeClass(home1LiNodes[oldIndex], 'rightHide');
							addClass(home1LiNodes[oldIndex], 'leftHide');
						}

//						从右往左(leftShow) 新的索引小于旧的索引
						if(this.index < oldIndex) {
							removeClass(home1LiNodes[this.index], 'rightShow');
							removeClass(home1LiNodes[this.index], 'leftHide');
							removeClass(home1LiNodes[this.index], 'rightHide');
							addClass(home1LiNodes[this.index], 'leftShow');
							
							removeClass(home1LiNodes[oldIndex], 'leftShow');
							removeClass(home1LiNodes[oldIndex], 'rightShow');
							removeClass(home1LiNodes[oldIndex], 'leftHide');
							addClass(home1LiNodes[oldIndex], 'rightHide');
						}
						
						oldIndex = this.index;
						
						autoIndex = this.index;
						
//						重新开始定时器
//						move();
					};
				}
//				自动轮播
				move();
				function move() {
					clearInterval(timerHome2);
					timerHome2 = setInterval(function() {
						autoIndex ++;
						
//						无缝滚动
						if(autoIndex == home1LiNodes.length) {
							autoIndex = 0;
						}
						
//						小圆点同步
						for(var i=0;i<home2LiNodes.length;i++) {
							removeClass(home2LiNodes[i],'active');
						}
						addClass(home2LiNodes[autoIndex], 'active');
						
						removeClass(home1LiNodes[autoIndex], 'leftHide');
						removeClass(home1LiNodes[autoIndex], 'leftShow');
						removeClass(home1LiNodes[autoIndex], 'rightHide');
						addClass(home1LiNodes[autoIndex], 'rightShow');
						
						removeClass(home1LiNodes[oldIndex], 'leftShow');
						removeClass(home1LiNodes[oldIndex], 'rightShow');
						removeClass(home1LiNodes[oldIndex], 'rightHide');
						addClass(home1LiNodes[oldIndex], 'leftHide');
					
						
//						自动轮播与手动轮播上一次索引的同步问题
						oldIndex = autoIndex;
					},2000);
				}
				
				
//				鼠标移到home1后轮播器停止
				home1.onmouseenter = function() {
					clearInterval(timerHome2);
				};
				
			}
			
			
//			第四屏的交互效果  
//				---> 图片炸裂
			picBoom();
			function picBoom() {
				for(var i=0;i<aboutUls.length;i++) {
					change(aboutUls[i]);
				}
			
				function change(ul) {
					var src = ul.dataset.src;
					var w = ul.offsetWidth/2;
					var h = ul.offsetHeight/2;
					for(var i=0;i<4;i++) {
						var liNodes = document.createElement('li');
						liNodes.style.width = w + 'px';
						liNodes.style.height = h + 'px';
						var imgNodes = document.createElement('img');
						imgNodes.src = src;
						imgNodes.style.width = '320px';
						imgNodes.style.height = '200px';
						
//							四个li里面图片的位置
//						0	1.left : 0	top : 0
//						1	2.left : -w top : 0
//						2	3.left : 0  top : -h
//						3	4.left : -w top : -h
						imgNodes.style.left = -(i%2)*w + 'px';
						imgNodes.style.top = -Math.floor(i/2)*h + 'px';
						liNodes.appendChild(imgNodes);
						ul.appendChild(liNodes);
					}
					var imgNodes = document.querySelectorAll('#content > .list .about .about3 > .item > ul img');
					ul.onmouseenter = function() {
//						鼠标hove之前img的top和left值
//						0	1.left : 0	top : 0
//						1	2.left : -w top : 0
//						2	3.left : 0  top : -h
//						3	4.left : -w top : -h
//						鼠标hove之后img的top和left值	
//						0	1.left : 0	top : h
//						1	2.left : -2w top : 0
//						2	3.left : w  top : -h
//						3	4.left : -w top : -2h
						var imgNodes = this.querySelectorAll('li > img');
						imgNodes[0].style.top = h + 'px';
						imgNodes[1].style.left = -2.5*w + 'px';
						imgNodes[2].style.left = w + 'px';
						imgNodes[3].style.top = -2*h + 'px';
					};
					ul.onmouseleave = function() {
						var imgNodes = this.querySelectorAll('li > img');
						imgNodes[0].style.top = 0 + 'px';
						imgNodes[1].style.left = -w + 'px';
						imgNodes[2].style.left = 0 + 'px';
						imgNodes[3].style.top = -h + 'px';
					};
				}
			}
			
			
//			内容区的交互开始
			contentBind();
			function contentBind() {
				content.style.height = document.documentElement.clientHeight - head.offsetHeight + 'px';
				for(var i=0;i<cLiNode.length;i++) {
					cLiNode[i].style.height = document.documentElement.clientHeight - head.offsetHeight + 'px';
				}
			}
			
			if(content.addEventListener) {
				content.addEventListener('DOMMouseScroll',function(ev) {
					ev = ev || event;
					clearTimeout(timer);
					timer=setTimeout(function() {
						fn(ev);
					},200);
				});
			}
//			鼠标滚轮事件
			content.onmousewheel =  function(ev) {
					ev = ev || event;
					clearTimeout(timer);
					timer=setTimeout(function() {
						fn(ev);
					},200);
			}
					
					
			function fn(ev) {
				ev = ev || event;
				var dir = ''
				if(ev.wheelDelta) {
					dir = ev.wheelDelta>0?'up':'down';
				}else if(ev.detail) {
					dir = ev.detail<0?'up':'down';
				}
				
				switch(dir) {
					case 'up':
						if(now>0) {
							now--;
							move(now);
						}
						break;
					case 'down':
						if(now<cLiNode.length-1) {
							now++;
							move(now);
						}
						break;
				}
			}
						
//			内容区的交互结束


//			头部的交互
			headBind();
			function headBind() {
				firstUpNode.style.width = '100%';
				arrowNode.style.left = firstLiNode.offsetLeft + firstLiNode.offsetWidth/2 - arrowNode.offsetWidth/2 + 'px';
			
				for(var i=0;i<LiNode.length;i++) {
					LiNode[i].index = i;
					LiNode[i].onclick = function() {
						move(this.index);
						now = this.index;
					};	
				}
				
				for(var i=0;i<dots.length;i++) {
					dots[i].index = i;
					dots[i].onclick = function() {
						move(this.index);
						now = this.index;
					};	
				}
			}
			
			
//			出入场动画
			var anArr = [
				{
					inAn: function() {},
					outAn: function() {
						var home1 = query.querySelector('#content > .list .home .home1');
						var home2 = query.querySelector('#content > .list .home .home2');
						
						home1.style.transform =  'translateY(-300px)';
						home2.style.transform =  'translateY(100px)';
						home1.style.opacity = 0;
						home2.style.opacity = 0; 
					}
				},
				{
					inAn: function() {},
					outAn: function() {}
				},
				{
					inAn: function() {},
					outAn: function() {}
				},
				{
					inAn: function() {},
					outAn: function() {}
				},
				{
					inAn: function() {},
					outAn: function() {}
				}
			];
			
			anArr[0].outAn();
			
//			动画的核心函数
			function move(index) {
				for(var i=0;i<UpNode.length;i++) {
					UpNode[i].style.width = '';
				}
				
				for(var i=0;i<dots.length;i++) {
					dots[i].className = ' ';
				}
				dots[index].className = 'active';
				
				UpNode[index].style.width = '100%';
				arrowNode.style.left = LiNode[index].offsetLeft + LiNode[index].offsetWidth/2 - arrowNode.offsetWidth/2 + 'px';
				cList.style.top = -index * (document.documentElement.clientHeight - head.offsetHeight) + 'px';
			}
			
//			工具类js
			function addClass(node,className) {
				var reg = new RegExp('(\\s|^)' + className + '(\\s|$)');
				if(!node.className.match(reg)) {
					node.className += ' ' + className;
				}
			}
			
			function removeClass(node,className) {
				var reg = new RegExp('(\\s|^)' + className + '(\\s|$)');
				if(node.className.match(reg)) {
					node.className = node.className.replace(reg, ' ');
				}
			}
			


		
		};
	</script>
</html>